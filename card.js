(function(){new CardPrototype({name:"NewRelicResponseTimeCard",init:function(){$.getScript("https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.1/Chart.min.js")},preload:function(){},render:function(){var t=this;return t.getApiKey(),t.getAppId(),0==t.addError()?!1:(t.getSummarizedData(),t.getUnsummarizedData(),void 0)},reload:function(){$("#"+this.id+" #card-settings-button").removeClass("fa-pulse"),$("#"+this.id+" .configwarning").hide(),this.render()},getApiKey:function(){return CardPrototype.prototype.getProperty(this,"nrapdex_API_key")},getAppId:function(){return CardPrototype.prototype.getProperty(this,"nrapdex_app_id")},getDTS:function(){return CardPrototype.prototype.getProperty(this,"nrapdex_dts")},getSummarizedData:function(){var t=this,e=new Date,i=new Date;i.setDate(i.getDate()-t.getDTS()),$.ajax({type:"GET",url:"https://api.newrelic.com/v2/applications/"+t.getAppId()+"/metrics/data.json",headers:{"X-Api-Key":t.getApiKey()},data:{names:["Agent/MetricsReported/count"],from:i.toISOString(),to:e.toISOString(),summarize:!0},success:function(e){var i=e.metric_data.metrics[0].timeslices[0].values;$("#"+t.id+" .average").text(i.average_response_time+"ms"),$("#"+t.id+" .min .fa").text(i.min_response_time+"ms"),$("#"+t.id+" .max .fa").text(i.max_response_time+"ms")},error:function(){t.addError()}})},getUnsummarizedData:function(){var t=this,e=new Date,i=new Date;i.setDate(i.getDate()-t.getDTS()),$.ajax({type:"GET",url:"https://api.newrelic.com/v2/applications/"+t.getAppId()+"/metrics/data.json",headers:{"X-Api-Key":t.getApiKey()},data:{names:["Agent/MetricsReported/count"],from:i.toISOString(),to:e.toISOString(),summarize:!1},success:function(e){var i=e.metric_data.metrics[0].timeslices,r=[],a=[],n=$("#"+t.id+" .newrelicresponsetimechart").get("0").getContext("2d");$.each(i,function(){r.push(""),a.push(this.values.average_response_time)}),new Chart(n).Line({labels:r,datasets:[{label:"My First dataset",fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)",data:a}]},{scaleShowGridLines:!1,scaleShowHorizontalLines:!1,pointDotRadius:!1,pointHitDetectionRadius:1,datasetStrokeWidth:1})},error:function(){t.addError()}})},addError:function(){var t=this;return t.isEmpty(t.getApiKey())||t.isEmpty(t.getAppId())?($("#"+this.id+" #card-settings-button").addClass("fa-pulse"),$("#"+this.id+" .configwarning").show(),!1):!0},isEmpty:function(t){return null==t?!0:!t||0===t.length}})})(this);